---
import Layout from '../layouts/Layout.astro';
import PasswordSettings from '../components/PasswordSettings.svelte';
import PaymentSettings from '../components/PaymentSettings.svelte';
import ApiSettings from '../components/ApiSettings.svelte';
import BeeminderSettings from '../components/BeeminderSettings.svelte';
import GeneralSettings from '../components/GeneralSettings.svelte';
---

<Layout title="Account | TaskRatchet">
	<div class="container">
		<h1>Account</h1>

		<div class="tabs">
			<button class="tab active" data-tab="general">General</button>
			<button class="tab" data-tab="password">Password</button>
			<button class="tab" data-tab="payment">Payment</button>
			<button class="tab" data-tab="integrations">Integrations</button>
			<button class="tab" data-tab="api">API</button>
		</div>

		<div class="tab-content" id="general">
			<GeneralSettings client:load />
		</div>
		<div class="tab-content" id="password" style="display: none;">
			<PasswordSettings client:load />
		</div>
		<div class="tab-content" id="payment" style="display: none;">
			<PaymentSettings client:load />
		</div>
		<div class="tab-content" id="api" style="display: none;">
			<ApiSettings client:load />
		</div>
		<div class="tab-content" id="integrations" style="display: none;">
			<h2>Beeminder Integration</h2>
			<BeeminderSettings client:load />
		</div>
	</div>
</Layout>

<style>
	.container {
		max-width: 800px;
		margin: 0 auto;
		padding: 1rem;
	}

	.tabs {
		display: flex;
		gap: 1rem;
		margin-bottom: 2rem;
	}

	.tab {
		background: var(--background);
		color: var(--color);
		border: 1px solid var(--color);
		padding: 0.5rem 1rem;
		border-radius: 4px;
		cursor: pointer;
		opacity: 0.7;
	}

	.tab:hover {
		opacity: 1;
	}

	.tab.active {
		background: var(--primary);
		border-color: var(--primary);
		color: white;
		opacity: 1;
	}
</style>

<script>
	const tabs = document.querySelectorAll('.tab');
	const contents = document.querySelectorAll(
		'.tab-content'
	) as NodeListOf<HTMLElement>;

	tabs.forEach((tab) => {
		tab.addEventListener('click', () => {
			const target = tab.getAttribute('data-tab');

			tabs.forEach((t) => t.classList.remove('active'));
			tab.classList.add('active');

			contents.forEach((content) => {
				content.style.display = content.id === target ? 'block' : 'none';
			});
		});
	});
</script>
